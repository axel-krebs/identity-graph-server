<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

	<modelVersion>4.0.0</modelVersion>

	<groupId>eu.tecfox.cloud</groupId>
	<artifactId>igs</artifactId>
	<packaging>pom</packaging>
	<version>1.0.0</version>

	<name>Identity Graph Server</name>
	<description>Server</description>

	<modules>
		<module>igs-core-bundle</module>
		<module>igs-core-bdb</module>
		<module>igs-service-bundle</module>
		<module>igs-admin-bundle</module>
		<module>igs-karaf-features</module>
		<module>igs-karaf-assembly</module>
		<module>igs-docker</module>
	</modules>

	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

		<!-- Define target platform -->

		<osgi.version>8.0.0</osgi.version>
		<osgi.compendium.version>7.0.0</osgi.compendium.version>
		<osgi.enterprise.version>5.0.0</osgi.enterprise.version>
		<osgi.annotation.version>8.1.0</osgi.annotation.version>
		<osgi.log.service.version>1.5.0</osgi.log.service.version>
		<osgi.cdi.version>1.0.1</osgi.cdi.version>
		<osgi.service.component.annotations.version>1.5.0</osgi.service.component.annotations.version>
		<osgi.service.metatype.annotations.version>1.4.1</osgi.service.metatype.annotations.version>
		<osgi.annotation.bundle.version>2.0.0</osgi.annotation.bundle.version>

		<!-- This is needed for the plugin only -->
		<aries.blueprint.annotation.version>1.0.1</aries.blueprint.annotation.version>
		<blueprint.maven.plugin.annotation.version>1.3.0</blueprint.maven.plugin.annotation.version>

		<java.version>11</java.version>

		<!-- Other API: logging etc. -->
		<slf4j.api.version>1.7.36</slf4j.api.version>

	</properties>

	<dependencyManagement>

		<dependencies>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>osgi.core</artifactId>
				<version>${osgi.version}</version>
				<scope>provided</scope>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>osgi.cmpn</artifactId>
				<version>${osgi.compendium.version}</version>
				<scope>provided</scope>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>osgi.enterprise</artifactId>
				<version>${osgi.enterprise.version}</version>
				<scope>provided</scope>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>osgi.annotation</artifactId>
				<version>${osgi.annotation.version}</version>
				<scope>provided</scope>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>org.osgi.service.log</artifactId>
				<version>${osgi.log.service.version}</version>
				<scope>provided</scope>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>org.osgi.service.cdi</artifactId>
				<version>${osgi.cdi.version}</version>
				<scope>provided</scope>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>org.osgi.service.component.annotations</artifactId>
				<version>${osgi.service.component.annotations.version}</version>
				<scope>provided</scope>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>org.osgi.service.metatype.annotations</artifactId>
				<version>${osgi.service.metatype.annotations.version}</version>
			</dependency>

			<dependency>
				<groupId>org.osgi</groupId>
				<artifactId>org.osgi.annotation.bundle</artifactId>
				<version>${osgi.annotation.bundle.version}</version>
				<scope>provided</scope>
			</dependency>

			<!-- DI container, not Spring -->


			<!-- These are not yet supported by Aries blueprint: <dependency> <groupId>jakarta.inject</groupId> 
				<artifactId>jakarta.inject-api</artifactId> <version>2.0.1</version> </dependency> <dependency> <groupId>jakarta.enterprise</groupId> 
				<artifactId>jakarta.enterprise.cdi-api</artifactId> <version>4.0.0</version> <scope>provided</scope> 
				</dependency> <dependency> <groupId>jakarta.persistence</groupId> <artifactId>jakarta.persistence-api</artifactId> 
				<version>3.1.0</version> </dependency> <dependency> <groupId>jakarta.transaction</groupId> <artifactId>jakarta.transaction-api</artifactId> 
				<version>2.0.1</version> </dependency> <dependency> <groupId>jakarta.annotation</groupId> <artifactId>jakarta.annotation-api</artifactId> 
				<version>2.1.0</version> </dependency> -->

			<!-- JEE API supported by Aries blueprint annotations: -->

			<dependency>
				<groupId>javax.inject</groupId>
				<artifactId>javax.inject</artifactId>
				<version>1</version>
				<optional>true</optional>
			</dependency>

			<dependency>
				<groupId>javax.enterprise</groupId>
				<artifactId>cdi-api</artifactId>
				<!-- <version>1.2</version> -->
				<version>2.0.SP1</version>
				<optional>true</optional>
			</dependency>

			<dependency>
				<groupId>javax.persistence</groupId>
				<artifactId>persistence-api</artifactId>
				<version>1.0.2</version>
				<optional>true</optional>
			</dependency>

			<dependency>
				<groupId>javax.transaction</groupId>
				<artifactId>javax.transaction-api</artifactId>
				<!-- <version>1.2</version> -->
				<version>1.3</version>
				<optional>true</optional>
			</dependency>

			<dependency>
				<groupId>javax.annotation</groupId>
				<artifactId>javax.annotation-api</artifactId>
				<version>1.3.2</version>
			</dependency>


			<!-- <dependency> -->
			<!-- <groupId>org.apache.aries.blueprint</groupId> -->
			<!-- <artifactId>org.apache.aries.blueprint.annotation</artifactId> -->
			<!-- <version>${aries.blueprint.annotation.version}</version> -->
			<!-- <scope>provided</scope> -->
			<!-- </dependency> -->

			<dependency>
				<groupId>org.apache.aries.blueprint</groupId>
				<artifactId>blueprint-maven-plugin-annotation</artifactId>
				<version>${blueprint.maven.plugin.annotation.version}</version>
				<optional>true</optional>
			</dependency>

			<dependency>
				<groupId>org.ops4j.pax.cdi</groupId>
				<artifactId>pax-cdi-api</artifactId>
				<!-- <version>0.8.0</version> -->
				<version>1.1.4</version>
				<optional>true</optional>
			</dependency>

			<dependency>
				<groupId>org.apache.servicemix.bundles</groupId>
				<artifactId>org.apache.servicemix.bundles.spring-beans</artifactId>
				<!-- <version>3.2.11.RELEASE_1</version> -->
				<version>5.3.18_1</version>
				<optional>true</optional>
			</dependency>

		</dependencies>
	</dependencyManagement>

	<build>

		<pluginManagement>
			<plugins>

				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-compiler-plugin</artifactId>
					<version>3.10.1</version>
					<configuration>
						<release>${java.version}</release>
					</configuration>
				</plugin>

				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-resources-plugin</artifactId>
					<version>3.2.0</version>
				</plugin>

				<plugin>
					<groupId>org.apache.felix</groupId>
					<artifactId>maven-bundle-plugin</artifactId>
					<version>5.1.5</version>
				</plugin>

				<plugin>
					<groupId>org.apache.aries.blueprint</groupId>
					<artifactId>blueprint-maven-plugin</artifactId>
					<version>1.10.0</version>
					<dependencies>
						<dependency>
							<groupId>org.apache.xbean</groupId>
							<artifactId>xbean-finder-shaded</artifactId>
							<version>4.21</version>
						</dependency>
					</dependencies>
				</plugin>

				<plugin>
					<groupId>org.eclipse.m2e</groupId>
					<artifactId>lifecycle-mapping</artifactId>
					<version>1.0.0</version>
					<configuration>
						<lifecycleMappingMetadata>
							<pluginExecutions>
								<pluginExecution>
									<pluginExecutionFilter>
										<groupId>org.apache.karaf.tooling</groupId>
										<artifactId>karaf-maven-plugin</artifactId>
										<versionRange>[4,5)</versionRange>
										<goals>
											<goal>assembly</goal>
											<goal>verify</goal>
											<goal>features-generate-descriptor</goal>
											<goal>resources</goal>
										</goals>
									</pluginExecutionFilter>
									<action>
										<ignore />
									</action>
								</pluginExecution>
							</pluginExecutions>
						</lifecycleMappingMetadata>
					</configuration>
				</plugin>

			</plugins>
		</pluginManagement>

	</build>

	<profiles>

		<profile>
			<id>osgi-8</id>
			<modules>
			</modules>
			<properties>

			</properties>
			<build>
				
			</build>
		</profile>

	</profiles>

</project>